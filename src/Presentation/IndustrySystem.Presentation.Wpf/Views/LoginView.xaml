<UserControl x:Class="IndustrySystem.Presentation.Wpf.Views.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:loc="clr-namespace:IndustrySystem.Presentation.Wpf.Resources"
             xmlns:conv="clr-namespace:IndustrySystem.Presentation.Wpf.Converters"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:prism="http://prismlibrary.com/"
             Width="530" >

    <prism:Dialog.WindowStyle>
        <Style TargetType="Window">
            <Setter Property="Title" Value="Login"/>
            <Setter Property="ResizeMode" Value="NoResize"/>
            <Setter Property="WindowStyle" Value="None"/>
            <Setter Property="AllowsTransparency" Value="True"/>
            <Setter Property="Background" Value="Transparent"/>
        </Style>
    </prism:Dialog.WindowStyle>

    <UserControl.Resources>
        <loc:LocalizationProvider x:Key="Loc" />
        <conv:BooleanNegationConverter x:Key="Not" />
        <LinearGradientBrush x:Key="LoginBackgroundBrush" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#667eea" Offset="0"/>
            <GradientStop Color="#764ba2" Offset="1"/>
        </LinearGradientBrush>
    </UserControl.Resources>

    <Border CornerRadius="5" Background="{StaticResource LoginBackgroundBrush}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Canvas Grid.RowSpan="3">
                <Ellipse Width="400" Height="400" Canvas.Left="-150" Canvas.Top="-150" Fill="#20FFFFFF" Opacity="0.3"/>
                <Ellipse Width="300" Height="300" Canvas.Right="-100" Canvas.Bottom="-100" Fill="#20FFFFFF" Opacity="0.3"/>
                <Ellipse Width="200" Height="200" Canvas.Right="100" Canvas.Top="50" Fill="#20FFFFFF" Opacity="0.2"/>
            </Canvas>
            <Border Grid.Row="0" Padding="22,32">
                <!--<Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="#0078D4" Offset="0"/>
                        <GradientStop Color="#00BCF2" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>-->
                <StackPanel HorizontalAlignment="Center">
                    <Border Width="64" Height="64" Background="White" CornerRadius="32" Margin="0,0,0,16">
                        <Border.Effect>
                            <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="0" Opacity="0.3"/>
                        </Border.Effect>
                        <materialDesign:PackIcon Kind="Account" Width="40" Height="40" Foreground="#0078D4"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock Text="{Binding [Page_Login_Title], Source={StaticResource Loc}}" 
                    FontSize="28" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                    <TextBlock Text="Industrial Management System" FontSize="14" Foreground="#E0FFFFFF"
                    HorizontalAlignment="Center" Margin="0,4,0,0"/>
                </StackPanel>
            </Border>
            <materialDesign:Card Grid.Row="1"  Width="450" VerticalAlignment="Center" HorizontalAlignment="Center"
                            UniformCornerRadius="16" materialDesign:ElevationAssist.Elevation="Dp8">

                <StackPanel   Margin="24">
                    <TextBox materialDesign:HintAssist.Hint="{Binding [Field_User_UserName], Source={StaticResource Loc}}"
                            materialDesign:HintAssist.IsFloating="True"
                            Style="{StaticResource MaterialDesignOutlinedTextBox}"
                            Text="{Binding UserName, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                              Margin="0,0,0,16"/>

                    <PasswordBox x:Name="Pwd" 
                                materialDesign:HintAssist.Hint="{Binding [Field_User_Password], Source={StaticResource Loc}}"
                                materialDesign:HintAssist.IsFloating="True"
                                Style="{StaticResource MaterialDesignOutlinedPasswordBox}"
                                 Margin="0,0,0,8"/>

                    <TextBlock Foreground="#E74856" Text="{Binding ErrorMessage}" FontSize="12"
                              Margin="0,4,0,8" TextWrapping="Wrap"
                              Visibility="{Binding HasError, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <CheckBox Content="{Binding [Login_Remember], Source={StaticResource Loc}}" 
                             IsChecked="{Binding Remember}"
                             Style="{StaticResource MaterialDesignCheckBox}" Margin="0,0,0,12"/>

                    <Button Content="{Binding [Btn_Login], Source={StaticResource Loc}}" 
                           Command="{Binding LoginCommand}" BorderBrush="Transparent"
                           Style="{StaticResource MaterialDesignRaisedButton}"
                           Height="48" FontSize="22" 
                           IsEnabled="{Binding IsBusy, Converter={StaticResource Not}}"
                           Margin="0,0,0,12">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#667eea" Offset="0"/>
                                <GradientStop Color="#764ba2" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0" Content="{Binding [Login_Quick], Source={StaticResource Loc}}" 
                               Command="{Binding QuickLoginCommand}"
                               Style="{StaticResource MaterialDesignFlatButton}" HorizontalAlignment="Left"/>
                        <Button Grid.Column="1" Content="{Binding [Btn_Cancel], Source={StaticResource Loc}}" 
                               Command="{Binding CancelCommand}"
                               Style="{StaticResource MaterialDesignFlatButton}" HorizontalAlignment="Right"/>
                    </Grid>

                    <ProgressBar Style="{StaticResource MaterialDesignLinearProgressBar}"
                                IsIndeterminate="True" Height="3" Margin="0,16,0,0"
                                Visibility="{Binding IsBusy, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                </StackPanel>

            </materialDesign:Card>

            <TextBlock Grid.Row="2" Text="Copyright 2024 Industry System. All rights reserved." 
                  FontSize="12" Foreground="White" Opacity="0.8"
                  HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,20,0,24"/>

        </Grid>
    </Border>
</UserControl>
