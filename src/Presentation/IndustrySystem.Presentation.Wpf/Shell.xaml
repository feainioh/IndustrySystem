<Window x:Class="IndustrySystem.Presentation.Wpf.Shell"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:ui="http://schemas.modernwpf.com/2019"
 xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
 xmlns:local="clr-namespace:IndustrySystem.Presentation.Wpf"
 xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
 xmlns:res="clr-namespace:IndustrySystem.Presentation.Wpf.Resources"
 ui:WindowHelper.UseModernWindowStyle="True"
 Title="{Binding [App_Title], Source={StaticResource Loc}}"
 Height="700" Width="1100"
 WindowStartupLocation="CenterScreen">

 <Window.Resources>
 <res:LocalizationProvider x:Key="Loc" />
 </Window.Resources>

 <Grid>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="*"/>
 </Grid.RowDefinitions>

 <!-- NavigationView hierarchical (with arrows) -->
 <ui:NavigationView x:Name="NavView" 
 Grid.Row ="1"
 IsSettingsVisible="True"
 PaneDisplayMode="Left"
 IsPaneOpen="True"
 OpenPaneLength="180"
 CompactPaneLength="48"
 IsBackButtonVisible="Collapsed"
 ItemInvoked="NavView_ItemInvoked">
 <i:Interaction.Triggers>
 <i:EventTrigger EventName="Loaded">
 <i:InvokeCommandAction Command="{Binding OnLoadedCommand}"/>
 </i:EventTrigger>
 <i:EventTrigger EventName="SelectionChanged">
 <i:InvokeCommandAction Command="{Binding NavSelectionChangedCommand}" PassEventArgsToCommand="True"/>
 </i:EventTrigger>
 </i:Interaction.Triggers>
 <ui:NavigationView.PaneHeader>
 <TextBlock Text="{Binding [App_Title], Source={StaticResource Loc}}" FontSize="16" VerticalAlignment="Center" Foreground="White" Margin="8,0,0,0"/>
 </ui:NavigationView.PaneHeader>

 <ui:NavigationView.MenuItems>
 <!--运行看板 -->
 <ui:NavigationViewItem Content="{Binding [Nav_RunDashboard], Source={StaticResource Loc}}">
 <ui:NavigationViewItem.Icon>
 <ui:SymbolIcon Symbol="Home"/>
 </ui:NavigationViewItem.Icon>
 <ui:NavigationViewItem.MenuItems>
 <ui:NavigationViewItem Content="{Binding [Nav_RunExperiment], Source={StaticResource Loc}}" Tag="RunExperiment">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE768;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_RealtimeData], Source={StaticResource Loc}}" Tag="RealtimeData">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE9D2;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 </ui:NavigationViewItem.MenuItems>
 </ui:NavigationViewItem>

 <!-- 实验管理 -->
 <ui:NavigationViewItem Content="{Binding [Nav_ExperimentManagement], Source={StaticResource Loc}}">
 <ui:NavigationViewItem.Icon>
 <ui:SymbolIcon Symbol="Library"/>
 </ui:NavigationViewItem.Icon>
 <ui:NavigationViewItem.MenuItems>
 <ui:NavigationViewItem Content="{Binding [Nav_Templates], Source={StaticResource Loc}}" Tag="Templates">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE7C3;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_ExperimentConfig], Source={StaticResource Loc}}" Tag="ExperimentConfig">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE9E9;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_ExperimentGroupConfig], Source={StaticResource Loc}}" Tag="ExperimentGroupConfig">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE71D;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_ExperimentGroupTemplates], Source={StaticResource Loc}}" Tag="ExperimentGroupTemplates">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE8C8;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 </ui:NavigationViewItem.MenuItems>
 </ui:NavigationViewItem>

 <!--物料管理 -->
 <ui:NavigationViewItem Content="{Binding [Nav_MaterialManagement], Source={StaticResource Loc}}">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE7B8;"/>
 </ui:NavigationViewItem.Icon>
 <ui:NavigationViewItem.MenuItems>
 <ui:NavigationViewItem Content="{Binding [Nav_MaterialInfo], Source={StaticResource Loc}}" Tag="MaterialInfo">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE8EC;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_ShelfInfo], Source={StaticResource Loc}}" Tag="ShelfInfo">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE81E;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_Inventory], Source={StaticResource Loc}}" Tag="Inventory">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE8B7;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 </ui:NavigationViewItem.MenuItems>
 </ui:NavigationViewItem>

 <!-- 数据管理 -->
 <ui:NavigationViewItem Content="{Binding [Nav_DataManagement], Source={StaticResource Loc}}">
 <ui:NavigationViewItem.Icon>
 <ui:SymbolIcon Symbol="Folder"/>
 </ui:NavigationViewItem.Icon>
 <ui:NavigationViewItem.MenuItems>
 <ui:NavigationViewItem Content="{Binding [Nav_InventoryRecords], Source={StaticResource Loc}}" Tag="InventoryRecords">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE77F;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_ExperimentHistory], Source={StaticResource Loc}}" Tag="ExperimentHistory">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE121;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_OperationLogs], Source={StaticResource Loc}}" Tag="OperationLogs">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE730;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 </ui:NavigationViewItem.MenuItems>
 </ui:NavigationViewItem>

 <!--设备管理 -->
 <ui:NavigationViewItem Content="{Binding [Nav_DeviceManagement], Source={StaticResource Loc}}">
 <ui:NavigationViewItem.Icon>
 <ui:SymbolIcon Symbol="Repair"/>
 </ui:NavigationViewItem.Icon>
 <ui:NavigationViewItem.MenuItems>
 <ui:NavigationViewItem Content="{Binding [Nav_ManualDebug], Source={StaticResource Loc}}" Tag="ManualDebug">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE9D9;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_DeviceParams], Source={StaticResource Loc}}" Tag="DeviceParams">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE713;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_PeripheralDebug], Source={StaticResource Loc}}" Tag="PeripheralDebug">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE8F6;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 </ui:NavigationViewItem.MenuItems>
 </ui:NavigationViewItem>

 <!-- 系统管理 -->
 <ui:NavigationViewItem Content="{Binding [Nav_SystemManagement], Source={StaticResource Loc}}">
 <ui:NavigationViewItem.Icon>
 <ui:SymbolIcon Symbol="Admin"/>
 </ui:NavigationViewItem.Icon>
 <ui:NavigationViewItem.MenuItems>
 <ui:NavigationViewItem Content="{Binding [Nav_Users], Source={StaticResource Loc}}" Tag="Users">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE77B;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_Roles], Source={StaticResource Loc}}" Tag="Roles">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE716;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 <ui:NavigationViewItem Content="{Binding [Nav_Permissions], Source={StaticResource Loc}}" Tag="Permissions">
 <ui:NavigationViewItem.Icon>
 <ui:FontIcon Glyph="&#xE72E;"/>
 </ui:NavigationViewItem.Icon>
 </ui:NavigationViewItem>
 </ui:NavigationViewItem.MenuItems>
 </ui:NavigationViewItem>
 </ui:NavigationView.MenuItems>

 <!-- Pane footer with user info -->
 <ui:NavigationView.PaneFooter>
 <Border Padding="12" BorderThickness="1,0,0,0" BorderBrush="#14000000">
 <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
 <ui:SymbolIcon Symbol="Contact" Width="20" Height="20"/>
 <StackPanel Margin="8,0,0,0">
 <TextBlock Text="{Binding CurrentUserName}" FontWeight="SemiBold"/>
 <TextBlock Text="{Binding CurrentUserRole}" Opacity="0.7" FontSize="12"/>
 </StackPanel>
 </StackPanel>
 </Border>
 </ui:NavigationView.PaneFooter>

 <Grid>
 <materialDesign:DialogHost Identifier="RootDialogHost">
 <ContentControl x:Name="MainRegionHost" Margin="12" Content="{Binding CurrentContent}"/>
 </materialDesign:DialogHost>
 </Grid>
 </ui:NavigationView>
 </Grid>
</Window>
